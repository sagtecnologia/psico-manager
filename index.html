<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login - Sistema de Gestão Psicológica</title>
  <link rel="stylesheet" href="css/global.css">
  <link rel="stylesheet" href="css/auth.css">
</head>
<body class="auth-page">
  <div class="auth-container">
    <div class="auth-box">
      <div class="auth-header">
        <div class="logo">
          <svg width="50" height="50" viewBox="0 0 50 50" fill="none">
            <circle cx="25" cy="25" r="23" stroke="#6366f1" stroke-width="3"/>
            <path d="M25 15 C25 15, 30 20, 30 25 C30 30, 25 35, 25 35" stroke="#6366f1" stroke-width="2.5" fill="none"/>
            <path d="M25 15 C25 15, 20 20, 20 25 C20 30, 25 35, 25 35" stroke="#6366f1" stroke-width="2.5" fill="none"/>
          </svg>
        </div>
        <h1>Psico Manager</h1>
        <p class="subtitle">Sistema de Gestão para Psicólogos</p>
      </div>

      <!-- Formulário de Login -->
      <form id="loginForm" class="auth-form">
        <div class="form-group">
          <label for="email">E-mail</label>
          <input 
            type="email" 
            id="email" 
            name="email" 
            placeholder="seu@email.com"
            required
            autocomplete="email"
          >
        </div>

        <div class="form-group">
          <label for="password">Senha</label>
          <input 
            type="password" 
            id="password" 
            name="password" 
            placeholder="••••••••"
            required
            autocomplete="current-password"
          >
        </div>

        <div class="form-options">
          <label class="checkbox-label">
            <input type="checkbox" id="rememberMe">
            <span>Lembrar de mim</span>
          </label>
          <a href="#" id="forgotPasswordLink" class="link">Esqueceu a senha?</a>
        </div>

        <button type="submit" class="btn btn-primary btn-block" id="loginButton">
          <span>Entrar</span>
          <div class="spinner" style="display: none;"></div>
        </button>

        <div class="divider">
          <span>ou</span>
        </div>

        <button type="button" class="btn btn-outline btn-block" id="registerButton">
          Criar nova conta
        </button>
      </form>

      <!-- Mensagens de erro/sucesso -->
      <div id="authMessage" class="auth-message" style="display: none;"></div>
    </div>

    <!-- Modal de Recuperação de Senha -->
    <div id="forgotPasswordModal" class="modal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Recuperar Senha</h2>
          <button class="modal-close" id="closeModal">&times;</button>
        </div>
        <form id="forgotPasswordForm">
          <div class="form-group">
            <label for="resetEmail">E-mail cadastrado</label>
            <input 
              type="email" 
              id="resetEmail" 
              placeholder="seu@email.com"
              required
            >
          </div>
          <button type="submit" class="btn btn-primary btn-block">
            Enviar link de recuperação
          </button>
        </form>
      </div>
    </div>

    <!-- Modal de Registro -->
    <div id="registerModal" class="modal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Criar Conta</h2>
          <button class="modal-close" id="closeRegisterModal">&times;</button>
        </div>
        <form id="registerForm">
          <div class="form-group">
            <label for="regName">Nome Completo *</label>
            <input 
              type="text" 
              id="regName" 
              placeholder="Nome completo"
              required
            >
          </div>

          <div class="form-group">
            <label for="regCRP">CRP (Conselho Regional de Psicologia) *</label>
            <input 
              type="text" 
              id="regCRP" 
              placeholder="00/00000"
              required
            >
          </div>

          <div class="form-group">
            <label for="regEmail">E-mail *</label>
            <input 
              type="email" 
              id="regEmail" 
              placeholder="seu@email.com"
              required
            >
          </div>

          <div class="form-group">
            <label for="regPassword">Senha *</label>
            <input 
              type="password" 
              id="regPassword" 
              placeholder="Mínimo 8 caracteres"
              required
              minlength="8"
            >
          </div>

          <div class="form-group">
            <label for="regPasswordConfirm">Confirmar Senha *</label>
            <input 
              type="password" 
              id="regPasswordConfirm" 
              placeholder="Confirme sua senha"
              required
              minlength="8"
            >
          </div>

          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="acceptTerms" required>
              <span>Aceito os <a href="#" class="link">termos de uso</a> e <a href="#" class="link">política de privacidade</a></span>
            </label>
          </div>

          <button type="submit" class="btn btn-primary btn-block" id="registerSubmitBtn">
            <span class="btn-text">Criar Conta</span>
            <span class="btn-loading" style="display: none;">
              <svg class="spinner" viewBox="0 0 50 50">
                <circle class="path" cx="25" cy="25" r="20" fill="none" stroke-width="5"></circle>
              </svg>
              Criando conta...
            </span>
          </button>
        </form>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="config/supabase.js"></script>
  <script src="js/utils/helpers.js"></script>
  <script src="js/auth/login.js"></script>
</body>
</html>
